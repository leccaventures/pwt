# ============================================================
# PHAROS WATCHTOWER CONFIG
# ============================================================

chain:
    # Chain ID to identify the network (e.g., pharos-testnet, pharos-mainnet)
    chain_id: 'pharos-testnet'

    # Monitoring mode:
    # - "all": Monitors all validators found in the contract (Default)
    # - "selected": Monitors only the validators specified in 'validators'
    mode: 'all'

    # List of Validator BLS Public Keys to monitor.
    # Only used if mode is set to "selected".
    # Format: Hex string (with or without 0x prefix)
    # Example:
    # validators:
    #   - '0x400312341234~~~'
    #   - '0x...'

    # List of RPC nodes to connect to
    nodes:
        - label: 'node1'
          # RPC URL (HTTP/HTTPS)
          rpc: 'http://127.0.0.1:18100'
          # WebSocket URL (WS/WSS)
          ws: 'ws://127.0.0.1:18200'
          # Whether to send alerts if this node goes down
          alert_on_down: true

        # Example of a backup node:
        # - label: 'node2'
        #   rpc: 'http://127.0.0.1:18100'
        #   ws: 'ws://127.0.0.1:18200'
        #   alert_on_down: false

# ============================================================
# ALERTS
# ============================================================

alerts:
    # Alert notification channels
    channels:
        # Discord settings
        discord:
            # Alert to discord?
            enabled: false
            # The webhook is set by right-clicking on a channel, editing the settings, and configuring a webhook in the integrations section.
            webhook: 'https://discord.com/api/webhooks/999999999999999999/zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz'

        # Telegram settings
        telegram:
            # Alert via telegram?
            enabled: false
            # API key ... talk to @BotFather
            token: '5555555555:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'
            # The chat ID for the group where messages will be sent.
            chat_id: '-666666666'

        # Slack settings
        slack:
            # Send alerts to Slack?
            enabled: false
            # The webhook can be added in the Slack app directory.
            webhook: 'https://hooks.slack.com/services/AAAAAAAAAAAAAAAAAAAAAAA/bbbbbbbbbbbbbbbbbbbbbbbb'

        # PagerDuty settings
        pagerduty:
            # Should we use PagerDuty?
            enabled: false
            # This is an API key, not oauth token
            api_key: 'aaaaaaaaaaaabbbbbbbbbbbbbcccccccccccc'
            # Severity level for alerts (default: alert)
            severity: 'alert'

    # Alert rules - when to fire alerts
    rules:
        # Alert when node is down
        node_down:
            fire_after: '5m'
            resolve_after: '5m'

        # Alert when node height stalls
        node_stall:
            fire_after: '5m'

        # Alert when websocket is down
        ws_down:
            fire_after: '5m'
            resolve_after: '5m'

        # Alert when validator is down
        validator_down:
            fire_after: '5m'

        # Alert when validator last sign height halts
        validator_stall:
            fire_after: '5m'

        # Alert when validator uptime drops below threshold
        validator_uptime:
            # Alert if uptime drops below this percentage
            threshold: '90%'

# ============================================================
# ADVANCED (Optional - defaults shown)
# ============================================================
# Uncomment and modify these settings if you need to tune the monitor's behavior.
# Most users can leave these at their defaults.

advanced:
    # Rolling window duration for calculating statistics (default: 60m)
    window: '60m'

    # Interval to reload the validator set from the contract (default: 5m)
    reload_interval: '5m'

    # RPC call timeout (default: 5s)
    rpc_timeout: '5s'

    # WebSocket read timeout (default: 30s)
    ws_timeout: '30s'

    # Maximum number of concurrent workers for processing blocks/proofs (default: 50)
    #workers: 50

    # Port to listen on for the web dashboard (default: 8888, 0 = disabled)
    dashboard_port: 8888

    # Whether to hide live logs in the dashboard (default: false)
    hide_logs: false

    # Alert state persistence file (default: ./data/alerts-state.json)
    #state_file: './data/alerts-state.json'

    # Address of the Validator Set smart contract (default: 0x4100000000000000000000000000000000000000)
    contract_addr: '0x4100000000000000000000000000000000000000'
    # Prometheus settings
    prometheus:
        # Metrics name prefix (default: pharos)
        metrics_prefix: 'pharos'
        # Port to expose Prometheus metrics on (default: 9999, 0 = disabled)
        port: 9999
